<!DOCTYPE html>
<!-- Created by CodingLab |www.youtube.com/CodingLabYT-->
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <!--<title> Drop Down Sidebar Menu | CodingLab </title>-->
    <link rel="stylesheet" href="../css/tabbar.css">
    <link rel="stylesheet" href="../css/total_content.css">
    <link rel="stylesheet" href="../css/profile.css">
    <!-- Boxiocns CDN Link -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">



</head>

<body>


    <!-- <style>
        img {
            height: 200px;
            width: 200px;
            border: 1px black
        }
    </style> -->
    <div class="sidebar close">
        <div class="logo-details">
            <img src="../img/handy_logo2.png" width="70px" height="70px"></a>
            <span class="logo_name">Handy</span>
        </div>
        <ul class="nav-links">

            <li>
                <a style="background-color: #ffbb00;" href="profile-blog.html">
                    <i class='bx bx-user'></i>
                    <span class="link_name">Profile</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Profile</a></li>
                </ul>
            </li>

            <li>
                <a href="total_content.html">
                    <i class='bx bx-grid-alt'></i>
                    <span class="link_name">Home</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Home</a></li>
                </ul>
            </li>

            <li>
                <a href="video.html">
                    <i class='bx bx-play-circle'></i>
                    <span class="link_name">Video</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Video</a></li>
                </ul>
            </li>



            <li>
                <a href="article.html">
                    <i class='bx bx-news'></i>
                    <span class="link_name">article</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">article</a></li>
                </ul>
            </li>
            <li>
                <a href="review.html">
                    <i class='bx bx-calendar-star'></i>
                    <span class="link_name">Review</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Review</a></li>
                </ul>
            </li>
            <li>
                <a href="setting.html">
                    <i class='bx bx-cog'></i>
                    <span class="link_name">Setting</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Setting</a></li>
                </ul>
            </li>

        </ul>
    </div>
    <!--  ส่วนเนื้อหา -->
    <section class="home-section">
        <div class="home-content">
            <i class='bx bx-menu'></i>

        </div>
        </div>
        <div class="">
            <hr class="style3">
        </div>
        </div>




        <div class="row d-flex justify-content-center">
            <div class="col-md-10 col-lg-10">
                <div class="" style="background-color: #ffffff;">
                    <div class="">





                        <div class=" mb-3p-3 mb-2 boderline " id="card" style="max-width: 100%;">
                            <div class="row no-gutters ">
                                <div class="row-md-5 ">
                                    <div></div>
                                    <div class="row ">

                                        <br>
                                        <div class="img profile-dt">
                                            <img id="avatar" src="../img/avatar.png" alt="">
                                        </div>

                                        <div class="text tetx-profile">
                                            <h5 id="name"></h5><br>
                                            <span><b id="email"></b></span><br>

                                            <span><b id="phone"></b></span>

                                            <br>
                                            <hr>
                                            <span id="detail"></span>

                                        </div>
                                    </div><br>
                                </div>

                            </div>
                        </div>




                        <div class="icon-bar">
                            <a style="background-color: #f0f0f1;" href="profile-blog.html"><i
                                    class='bx bx-news'></i></a>
                            <a href="profile-video.html"><i class='bx bx-play-circle'></i></a>
                            <div class="">

                                <!-- Button trigger modal   -->

                                <a data-toggle="modal" data-target="#exampleModal"><i
                                        class='bx bx-add-to-queue'></i></a>
                                </button>
                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="indicator"></div>
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel"></h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="media mb-3">


                                                    <form class="md-form">
                                                        <div class="file-field">
                                                            <div>
                                                                <h4 class="text-center">โพสต์บทความ</h4>
                                                                <img src="../img/image1.png" alt="" id="image"
                                                                    width="100">

                                                            </div>


                                                            <label>Image Name</label><input class="form-control"
                                                                type="text" id="nameimage"><label
                                                                id="extlab"></label><br><br>

                                                            <br>
                                                            <div class="text-center">
                                                                <button class="btn " id="selbtn"><img
                                                                        src="../img/addimage.png" class="Bimg"
                                                                        id="myimage"></button>
                                                            </div>
                                                            <br><br>


                                                            <br>


                                                            <div class="form-outline mb-4">
                                                                <input type="text" id="article_name"
                                                                    class="form-control" placeholder="หัวข้อ" />

                                                            </div>

                                                            <div class="form-outline mb-1">
                                                                <textarea class="form-control" id="article_detail"
                                                                    cols="100" rows="4"
                                                                    placeholder="รายละเอียด"></textarea>

                                                            </div>
                                                        </div>
                                                    </form>

                                                </div>
                                            </div>


                                            <div class="modal-footer">
                                                <button type="button" class="btn tn-info btn-danger"
                                                    data-dismiss="modal">Cancel</button>
                                                <button class="btn btn-info btn-warning" data-dismiss="modal"
                                                    onclick="createArticlePost('articles',email)">Upload</button>

                                                <!-- <button class="btn btn-info btn-warning" data-dismiss="modal"
                                                    onclick=" getBlogByEmail('videos','test')">Upload</button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>









                    <!-- partial -->
                    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
                    <script
                        src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js'></script>
                    <script src='https://unpkg.com/popper.js@1'></script>
                    <script src='https://unpkg.com/tippy.js@4'></script>
                    <script src='https://cdnjs.cloudflare.com/ajax/libs/autosize.js/4.0.2/autosize.min.js'></script>
                    <script
                        src='https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.4.0/perfect-scrollbar.min.js'></script>
                    <script src='https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js'></script>
                    <script src="./script.js"></script>



                </div>











                <br>
                <!-- card menu -->



                <div class="container-fluid  ">
                    <div class="row">
                        <div class="col-md-4 col-sm-4">
                            <div class="wrimagecard wrimagecard-topimage">
                                <a href="#">
                                    <div class="">
                                        <img class="card-img-top"
                                            src="https://static.trueplookpanya.com/cmsblog/3305/75305/thumb_file.jpg"
                                            alt="Card image cap">
                                    </div>
                                    <div class="wrimagecard">
                                        <div class="card-body">
                                            <h5 class="card-title" >title</h5>
                                            <span ></span>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>

                


            </div>
        </div>
        </div>
        </div>







    </section>
    <script src="../js/sidebar.js"> </script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-storage.js"></script>
    <script src=></script>
    <script src="../js/firebase_connect.js"></script>
    <script src="../js/showdata.js"></script>
    <script src="../js/post.js"></script>
    <script src="../js/test.js"></script>


    <!-- <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.3.0/firebase-app.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCjw9hEux7cBFUaTM5-V2fsCmjPbpmj9yo",
            authDomain: "diyproject-93b1f.firebaseapp.com",
            databaseURL: "https://diyproject-93b1f-default-rtdb.firebaseio.com",
            projectId: "diyproject-93b1f",
            storageBucket: "diyproject-93b1f.appspot.com",
            messagingSenderId: "25915915585",
            appId: "1:25915915585:web:89f1e518c905db9158f5c0",
            measurementId: "G-XRGSS0L8WP"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // firebase-storage
        import { getStorage, ref as sRef, uploadBytesResumable, getDownloadURL }
            from "https://www.gstatic.com/firebasejs/9.3.0/firebase-storage.js"

        // firebase-firestore
        import { getFirestore, doc, getDoc, setDoc, collection, addDoc }
            from "https://www.gstatic.com/firebasejs/9.3.0/firebase-firestore.js"
        const clouddb = getFirestore();

        // firebase-realtime databaes
        import { getDatabase, ref, set, child, get, update, remove }
            from "https://www.gstatic.com/firebasejs/9.3.0/firebase-database.js"
        const realdb = getDatabase();


        // ตั้งค่าการเพื่มไฟล์ภาพ

        var files = [];
        var reader = new FileReader();

        //ตัวแปรรูปภาพ
        var nameimage = document.getElementById('nameimage')
        var extlab = document.getElementById('extlab')
        var myimage = document.getElementById('myimage')
        var proglab = document.getElementById('upprogress')
        var Selbtn = document.getElementById('selbtn')
        var Upbtn = document.getElementById('upbtn')
        var Downbtn = document.getElementById('down')

        var input = document.createElement('input')
        input.type = 'file';

        input.onchange = e => {
            files = e.target.files;

            var extention = GetFileExt(files[0]);
            var name = GetFileName(files[0]);

            nameimage.value = name;
            extlab.innerHTML = extention;

            reader.readAsDataURL(files[0]);

        }
        reader.onload = function () {
            myimage.src = reader.result;
        }
        // ฟังชั่นเลือกรูป และเปลี่ยนนามสกุุลไฟล์

        Selbtn.onclick = function () {
            event.preventDefault ();
            input.click();
        }
        function GetFileExt(file) {
            var temp = file.name.split('.');
            var ext = temp.slice((temp.length - 1), (temp.length));
            return '.' + ext[0]
        }
        function GetFileName(file) {
            var temp = file.name.split('.');
            var fname = temp.slice(0, -1).join('.');
            return fname;
        }
        // โหลดรูปภาพ
        async function UploadProcess() {
            var ImgToUpload = files[0];

            var ImgName = nameimage.value + extlab.innerHTML;

            if (!ValidateName()) {
                alert('ชื่อไฟล์ไม่สามารถใช้ " . "," # "," $ "," [", or "] " ');
                return;
            }
            const metaData = {
                contentType: ImgToUpload.type
            }
            const storage = getStorage();

            const storageRef = sRef(storage, "Images/" + ImgName);

            const UploadTask = uploadBytesResumable(storageRef, ImgToUpload, metaData);

            UploadTask.on('state-changed', (snapshot) => {
                var progess = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                proglab.innerHTML = "Upload " + progess + "%";
            },
                (error) => {
                    alert("Error : ไม่สามารถอัปโหลดรูปภาพได้");
                },
                () => {
                    getDownloadURL(UploadTask.snapshot.ref).then((downloadURL) => {
                        SaveURLtoFirestore(downloadURL);
                    });

                }
            );
            //  ฟังชั่นของ firestorage databaes
            async function SaveURLtoFirestore(url) {
                var name = nameimage.value;
                var ext = extlab.innerHTML;


                var ref = doc(clouddb, "articles/" + name);

                await setDoc(ref, {

                    imageName: (name + ext),
                    imageURL: url,

                })
            }
        }
        //  ฟังชั่นของ realtime database
        //            function SaveURLtoRealtimeDB(URL){
        //            var name = nameimage.value;
        //            var ext = extlab.innerHTML;

        //            set(ref(realdb, "ImagesLink/"+name),{
        //                ImageName : (name+ext),
        //                ImgURL: URL
        //            });
        //        }
        //            function GetUrlfromRealtimeDB(){
        //            var name = nameimage.value;

        //           var dbRef =  ref(realdb);

        //           get(child(refdb, "ImagesLink/"+name)).then((snapshot)=>{
        //               if(snapshot.exists()){
        //                   myimage.scr = snapshot.val().ImgURL;
        //              }
        //           })
        //       }
        // ฟังชัน ดักจับคัวอักษรแปลกๆ
        function ValidateName() {
            var regex = /[\.#$\[\]]/
            return !(regex.test(nameimage.value));
        }

        //  ฟังชั่นกดปุ่ม
        Upbtn.onclick = UploadProcess;

//          Downbtn.onclick = GetUrlfromRealtimeDB;
    </script> -->



</body>



</html>